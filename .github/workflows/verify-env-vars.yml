name: Verify Environment Variables
on:
  workflow_dispatch:
  push:
    branches:
      - main
jobs:
  verify:
    runs-on: ubuntu-latest
    env:
      AGENT_ACTIONS: ${{ secrets.AGENT_ACTIONS }}
      NOTION_DISCUSSIONS_ARC_DB_ID: ${{ secrets.NOTION_DISCUSSIONS_ARC_DB_ID }}
      NOTION_ISSUES_BACKLOG_DB_ID: ${{ secrets.NOTION_ISSUES_BACKLOG_DB_ID }}
      NOTION_KNOWLEDGE_FILE_DB_ID: ${{ secrets.NOTION_KNOWLEDGE_FILE_DB_ID }}
      NOTION_PAGE_ID: ${{ secrets.NOTION_PAGE_ID }}
      NOTION_PR_BACKLOG_DB_ID: ${{ secrets.NOTION_PR_BACKLOG_DB_ID }}
      NOTION_PROJECT_BOARD_BACKLOG_DB_ID: ${{ secrets.NOTION_PROJECT_BOARD_BACKLOG_DB_ID }}
      NOTION_TASK_BACKLOG_DB_ID: ${{ secrets.NOTION_TASK_BACKLOG_DB_ID }}
      NOTION_TOKEN: ${{ secrets.NOTION_TOKEN }}
      REQUIRED_VARS: |
        AGENT_ACTIONS
        NOTION_DISCUSSIONS_ARC_DB_ID
        NOTION_ISSUES_BACKLOG_DB_ID
        NOTION_KNOWLEDGE_FILE_DB_ID
        NOTION_PAGE_ID
        NOTION_PR_BACKLOG_DB_ID
        NOTION_PROJECT_BOARD_BACKLOG_DB_ID
        NOTION_TASK_BACKLOG_DB_ID
        NOTION_TOKEN
    steps:
      - name: Check required environment variables
        run: |
          missing=false
          for var in $REQUIRED_VARS; do
            if [ -z "${!var}" ]; then
              echo "\u274c Missing required environment variable: $var"
              missing=true
            else
              echo "\u2705 $var is set"
            fi
          done
          if [ "$missing" = true ]; then
            echo "One or more required environment variables are missing."
            exit 1
          fi
